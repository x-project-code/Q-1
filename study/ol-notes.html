<!DOCTYPE html>
<html lang="en-LK" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- SEO Meta Tags -->
    <title>OL ‡∑Å‡∑ù‡∂ß‡∑ä ‡∂±‡∑ù‡∂ß‡∑ä‡∑É‡∑ä | O/Level Notes & Past Papers Download Collection</title>
    <meta name="description" content="Download Sri Lankan G.C.E. O/Level short notes, past papers, and study materials for History, Maths, Science, ICT, and more. Grade 10 & 11 resources in one place.">
    <meta name="keywords" content="OL Notes, OL Short Notes, OL Past Papers, Sri Lanka Education, Grade 10 Notes, Grade 11 Notes, Sinhala Medium, English Medium">
    <meta name="author" content="OL Education">
    <meta name="robots" content="index, follow">

    <!-- Open Graph / Social Media -->
    <meta property="og:title" content="OL ‡∑Å‡∑ù‡∂ß‡∑ä ‡∂±‡∑ù‡∂ß‡∑ä‡∑É‡∑ä | ü§çüë©‚Äçüéì">
    <meta property="og:description" content="All O/L subjects notes in one place. Free download for Grade 10 and 11.">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/3426/3426653.png">

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Sinhala:wght@400;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Tailwind Config -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Poppins', 'Noto Sans Sinhala', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            500: '#3b82f6',
                            600: '#2563eb',
                            900: '#1e3a8a',
                        }
                    }
                }
            }
        }
    </script>

    <!-- Structured Data -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "LearningResource",
      "name": "G.C.E. O/Level Notes Collection",
      "description": "Comprehensive collection of short notes and past papers for Grade 10 and 11 students in Sri Lanka.",
      "educationalLevel": "Grade 10, Grade 11",
      "inLanguage": ["si", "en", "ta"]
    }
    </script>

    <style>
        /* Custom Styles */
        .glass-card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        }
        
        .download-btn {
            transition: all 0.3s ease;
        }
        
        .download-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.4);
        }

        .loader {
            border: 3px solid #f3f3f3;
            border-radius: 50%;
            border-top: 3px solid #3498db;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans antialiased selection:bg-brand-200 selection:text-brand-900">

    <!-- RESPONSIVE HEADER -->
    <header class="sticky top-0 z-50 w-full bg-white/90 backdrop-blur border-b border-slate-200 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                
                <!-- Logo Section -->
                <div class="flex-shrink-0 flex items-center">
                    <a href="#" class="flex items-center gap-2 group">
                        <div class="flex flex-col sm:flex-row sm:items-baseline sm:gap-2">
                            <span class="text-xl sm:text-2xl font-bold text-brand-600 tracking-tight group-hover:text-brand-700 transition">
                                OL ‡∑Å‡∑ù‡∂ß‡∑ä ‡∂±‡∑ù‡∂ß‡∑ä‡∑É‡∑ä
                            </span>
                        </div>
                        <span class="hidden sm:inline text-slate-300">|</span>
                        <span class="text-lg sm:text-xl">ü§çüë©‚Äçüéì</span>
                    </a>
                </div>

                <!-- Desktop Right Side (Text Link) -->
                <div class="hidden md:block">
                    <a href="https://whatsapp.com/channel/0029VbB1B9HK5cDMdSzGog18" target="_blank" class="inline-flex items-center gap-2 text-sm font-semibold text-slate-600 hover:text-green-600 transition bg-slate-50 hover:bg-green-50 px-4 py-2 rounded-full border border-slate-200 hover:border-green-200">
                        Join WhatsApp <i class="fa-brands fa-whatsapp text-xl text-green-500"></i>
                    </a>
                </div>

                <!-- Mobile Right Side (Icon Only) -->
                <div class="md:hidden">
                    <a href="https://whatsapp.com/channel/0029VbB1B9HK5cDMdSzGog18" target="_blank" class="p-2 text-green-600 bg-green-50 rounded-full hover:bg-green-100 transition border border-green-200">
                        <i class="fa-brands fa-whatsapp text-xl"></i>
                    </a>
                </div>

            </div>
        </div>
    </header>

    <!-- Hero & Search -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
        
        <div class="text-center mb-12">
            <h1 class="text-3xl sm:text-4xl md:text-5xl font-extrabold text-slate-900 tracking-tight mb-4 leading-tight">
                Master Your O/Levels
            </h1>
            <p class="text-base sm:text-lg text-slate-600 max-w-2xl mx-auto mb-8 px-2">
                Access the best short notes, past papers, and study materials for Grade 10 & 11.
            </p>
            
            <!-- Search Bar -->
            <div class="relative max-w-md mx-auto px-2 sm:px-0">
                <div class="absolute inset-y-0 left-0 flex items-center pl-5 pointer-events-none">
                    <i class="fa-solid fa-search text-slate-400"></i>
                </div>
                <input type="text" id="searchInput" class="block w-full p-4 pl-12 text-sm text-slate-900 border border-slate-300 rounded-full bg-white focus:ring-2 focus:ring-brand-500 focus:border-brand-500 shadow-sm transition outline-none" placeholder="Search Subject..." required>
            </div>
        </div>

        <!-- Dynamic Content Container -->
        <div id="content-area" class="space-y-12">
            <!-- Categories will be injected here by JS -->
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-white border-t border-slate-200 mt-12">
        <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col items-center justify-between md:flex-row gap-4">
                <div class="text-slate-500 text-sm text-center md:text-left">
                    &copy; 2023 OL Notes Collection.<br class="sm:hidden"> All rights reserved.
                </div>
                <div class="flex space-x-6">
                    <a href="#" class="text-slate-400 hover:text-brand-500 transition"><i class="fa-brands fa-facebook fa-lg"></i></a>
                    <a href="#" class="text-slate-400 hover:text-brand-500 transition"><i class="fa-brands fa-telegram fa-lg"></i></a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <button id="backToTop" class="fixed bottom-6 right-6 bg-brand-600 text-white p-3 rounded-full shadow-xl opacity-0 transition-all duration-300 hover:bg-brand-700 z-30 hover:scale-110">
        <i class="fa-solid fa-arrow-up"></i>
    </button>

    <!-- WhatsApp Popup Modal -->
    <div id="waPopup" class="fixed inset-0 z-[60] hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
        <div class="fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity backdrop-blur-sm"></div>
        <div class="fixed inset-0 z-10 overflow-y-auto">
            <div class="flex min-h-full items-center justify-center p-4 text-center sm:p-0">
                <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg border-t-4 border-green-500">
                    <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
                        <div class="sm:flex sm:items-start">
                            <div class="mx-auto flex h-12 w-12 flex-shrink-0 items-center justify-center rounded-full bg-green-100 sm:mx-0 sm:h-10 sm:w-10">
                                <i class="fa-brands fa-whatsapp text-green-600 text-xl"></i>
                            </div>
                            <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                                <h3 class="text-base font-semibold leading-6 text-gray-900" id="modal-title">Stay Updated!</h3>
                                <div class="mt-2">
                                    <p class="text-sm text-gray-500">Join our official WhatsApp channel to get the latest notes and paper updates instantly.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 gap-2">
                        <a href="https://whatsapp.com/channel/0029VbB1B9HK5cDMdSzGog18" target="_blank" onclick="closeWaPopup()" class="inline-flex w-full justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 sm:w-auto">Join Now</a>
                        <button type="button" onclick="closeWaPopup()" class="mt-2 sm:mt-0 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:w-auto">Maybe Later</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ad Verification Modal (The Gatekeeper) -->
    <div id="adModal" class="fixed inset-0 z-[70] hidden">
        <div class="fixed inset-0 bg-slate-900 bg-opacity-90 backdrop-blur-sm transition-opacity"></div>
        <div class="flex min-h-full items-center justify-center p-4">
            <div class="relative w-full max-w-md transform rounded-2xl bg-white p-6 text-left shadow-2xl transition-all">
                
                <!-- Header -->
                <div class="mb-4 flex items-center justify-between">
                    <h3 class="text-lg font-bold text-slate-900">Unlock Download Link</h3>
                    <button onclick="closeAdModal()" class="text-slate-400 hover:text-slate-600 bg-slate-100 hover:bg-slate-200 rounded-full p-1 w-8 h-8 flex items-center justify-center transition"><i class="fa-solid fa-xmark"></i></button>
                </div>

                <p class="mb-6 text-sm text-slate-600 bg-blue-50 p-3 rounded-lg border border-blue-100">
                    <i class="fa-solid fa-circle-info text-blue-500 mr-1"></i> Please verify the following steps to unlock your download automatically.
                </p>

                <!-- Progress Bar -->
                <div class="w-full bg-gray-200 rounded-full h-2.5 mb-6 overflow-hidden">
                    <div id="progressBar" class="bg-gradient-to-r from-blue-500 to-brand-600 h-2.5 rounded-full transition-all duration-500 ease-out" style="width: 0%"></div>
                </div>

                <!-- Steps -->
                <div class="space-y-3">
                    <!-- Step 1 -->
                    <div id="step1-container" class="flex items-center justify-between p-3 border border-slate-200 rounded-xl bg-white shadow-sm">
                        <div class="flex items-center">
                            <span class="flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-slate-600 text-xs font-bold mr-3">1</span>
                            <span class="text-sm font-medium text-slate-700">Verification Step 1</span>
                        </div>
                        <button id="btn-step-1" onclick="handleAdStep(1)" class="px-4 py-2 text-xs font-bold text-white bg-brand-600 rounded-lg hover:bg-brand-700 transition-all shadow-sm hover:shadow-md">
                            Watch Ad
                        </button>
                        <span id="check-step-1" class="hidden text-green-500"><i class="fa-solid fa-circle-check fa-xl"></i></span>
                    </div>

                    <!-- Step 2 -->
                    <div id="step2-container" class="flex items-center justify-between p-3 border border-slate-200 rounded-xl bg-white shadow-sm opacity-50 pointer-events-none transition-all">
                        <div class="flex items-center">
                            <span class="flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-slate-600 text-xs font-bold mr-3">2</span>
                            <span class="text-sm font-medium text-slate-700">Verification Step 2</span>
                        </div>
                        <button id="btn-step-2" onclick="handleAdStep(2)" class="px-4 py-2 text-xs font-bold text-white bg-brand-600 rounded-lg hover:bg-brand-700 transition-all shadow-sm hover:shadow-md">
                            Watch Ad
                        </button>
                        <span id="check-step-2" class="hidden text-green-500"><i class="fa-solid fa-circle-check fa-xl"></i></span>
                    </div>
                </div>

                <!-- Final Loader -->
                <div id="final-loader" class="hidden mt-6 text-center bg-green-50 p-4 rounded-xl border border-green-100">
                    <div class="flex justify-center items-center space-x-3">
                        <div class="loader border-green-500 border-t-transparent"></div>
                        <span class="text-sm font-bold text-green-700">Auto-loading Download...</span>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- DATA STORE ---
        const adLinks = [
            "https://otieu.com/4/10239172",
            "https://otieu.com/4/10208217",
            "https://otieu.com/4/10268011",
            "https://otieu.com/4/9964213"
        ];

        // Store Used Ads to ensure rotation
        let usedAds = [];

        const subjectsData = {
            "Main Subjects": {
                "history": {
                    "title": "History (‡∂â‡∂≠‡∑í‡∑Ñ‡∑è‡∑É‡∂∫)",
                    "icon": "fa-landmark",
                    "g10": ["https://drive.google.com/file/d/1QAXZRjUuj_MP79e27p0501nXjbEo4iZO/view?usp=drive_link"],
                    "g11": ["https://drive.google.com/file/d/16urhn8DzK72gJLRIll2MmHDA_VZaTRdU/view?usp=drive_link", "https://drive.google.com/drive/folders/13ACyjyu9gHQVmJMCaTt2vaXEgDFhGUp2?usp=drive_link"]
                },
                "maths": {
                    "title": "Mathematics (‡∂ú‡∂´‡∑í‡∂≠‡∂∫)",
                    "icon": "fa-calculator",
                    "g10": ["https://drive.google.com/file/d/1SD8qUq5lrpKhy_cuBYF4yqbqgnYoPrzX/view?usp=drive_link"],
                    "g11": ["https://drive.google.com/file/d/1tqTc5xbxX3okhcgzrwzQxUM53CuVMjql/view?usp=drive_link", "https://drive.google.com/drive/folders/1ccS7uKaeu4Ni4oxfCL7bsA2BPIcDrGyy?usp=drive_link"]
                },
                "science": {
                    "title": "Science (‡∑Ä‡∑í‡∂Ø‡∑ä‚Äç‡∂∫‡∑è‡∑Ä)",
                    "icon": "fa-flask",
                    "g10": ["https://drive.google.com/file/d/1tqTc5xbxX3okhcgzrwzQxUM53CuVMjql/view?usp=drive_link"],
                    "g11": ["https://drive.google.com/file/d/1jMobtS8g7zyj_tn7w4i1wy8l7InEnpqv/view?usp=drive_link"]
                }
            },
            "Languages": {
                "sinhala": {
                    "title": "Sinhala (‡∑É‡∑í‡∂Ç‡∑Ñ‡∂Ω)",
                    "icon": "fa-book-open",
                    "links": [
                        { "name": "Literature", "url": "https://drive.google.com/file/d/1LHEwLN4OdvTZlXdZBkuEU-o4buaAJOKp/view?usp=drive_link" },
                        { "name": "Grammar", "url": "https://drive.google.com/file/d/1SSo3igR36qoLy2TnOZKm-vcpDyEQQz-E/view?usp=drive_link" }
                    ]
                },
                "tamil": {
                    "title": "Second Language Tamil",
                    "icon": "fa-language",
                    "links": [
                        { "name": "Note 1", "url": "https://drive.google.com/file/d/1EpAsLcekEwocfipHi4OgRPSz2oURhlyp/view?usp=drive_link" },
                        { "name": "Folder", "url": "https://drive.google.com/drive/folders/1IqYNiO90_tGAXU1IAIr4Aw6f2vl2HKKR?usp=drive_link" }
                    ]
                },
                "english": {
                    "title": "English",
                    "icon": "fa-a",
                    "links": [
                        { "name": "Note 1", "url": "https://drive.google.com/file/d/1FxMRO0_2CzLhhbS3phOSuc5bnnkYhs6s/view?usp=drive_link" },
                        { "name": "Folder", "url": "https://drive.google.com/drive/folders/1OV85u5KqXmhUadl0pvTpgehAPRqJEP0K?usp=drive_link" }
                    ]
                }
            },
            "Religion": {
                "buddhism": { "title": "Buddhism", "icon": "fa-dharmachakra", "links": ["https://drive.google.com/file/d/12XGqMP6VYNjmAhP-vqkfQcXHqvpUId14/view?usp=drive_link"] },
                "christianity": { "title": "Christianity", "icon": "fa-cross", "links": ["https://drive.google.com/file/d/1wjFQWqXP29rla3rcIZ-SSHR8QWAZirED/view?usp=drive_link"] },
                "catholic": { "title": "Catholic", "icon": "fa-church", "links": ["https://drive.google.com/file/d/1CTyd-kZtNfSmlU12spOENtI41LDPnT1a/view?usp=drive_link", "https://drive.google.com/drive/folders/11i-Qid2iiGgZRxWWIxJCe3_KJf91eyhH?usp=drive_link"] },
                "hinduism": { "title": "Hinduism", "icon": "fa-om", "links": ["https://drive.google.com/file/d/1hF7vs5Qy9j0hEfWtu-q6LH80Al7wmY7i/view?usp=drive_link"] },
                "islam": { "title": "Islam", "icon": "fa-star-and-crescent", "links": ["https://drive.google.com/file/d/1Ah0XQkFE6R6RFcYKfJw9lTEZZ36xJIaS/view?usp=drive_link"] }
            },
            "Basket Subjects": {
                "ict": { "title": "ICT", "icon": "fa-computer", "links": ["https://drive.google.com/file/d/1GvSZcaB8WkUj7Oeaaz5MQrDFYbQHYQek/view?usp=drive_link"] },
                "geography": { "title": "Geography", "icon": "fa-earth-americas", "links": ["https://drive.google.com/file/d/1X4a-MnHIyJ0AZQONyzPj8RfXrsKO8HR8/view?usp=drive_link"] },
                "commerce": { "title": "Commerce", "icon": "fa-chart-line", "links": ["https://drive.google.com/file/d/1AboK7fk1Cl9dpN2sFAV7ce4G_oakxDp3/view?usp=drive_link"] },
                "civics": { "title": "Civics", "icon": "fa-scale-balanced", "links": ["https://drive.google.com/file/d/1eo6vOsAJeO8kk0UlO8g63v_lLhbZSLAm/view?usp=drive_link"] },
                "health": { "title": "Health", "icon": "fa-heart-pulse", "links": ["https://drive.google.com/file/d/1ZkYlp4RVrKBZ0uBWxXgYmJTFfp4XWusi/view?usp=drive_link"] },
                "agriculture": { "title": "Agriculture", "icon": "fa-seedling", "links": ["https://drive.google.com/drive/folders/1cNnFwaoJN6QWqvUYfpcTKn_nzsN4oEbG?usp=drive_link"] },
                "homescience": { "title": "Home Science", "icon": "fa-house-chimney-user", "links": ["https://drive.google.com/drive/folders/1EIomihc6-nt4CpNFfHf7u7n0jdn3bBNK?usp=drive_link"] },
                "art": { "title": "Art", "icon": "fa-palette", "links": ["https://drive.google.com/drive/folders/18l31KSsiYwi_dhJMnQNZ5UCcJMAnXFQz?usp=drive_link"] },
                "dancing": { "title": "Dancing", "icon": "fa-music", "links": ["https://drive.google.com/drive/folders/1X6nfaEves8oVEMWteUPToRVK2DFOoCQP?usp=drive_link"] },
                "drama": { "title": "Drama", "icon": "fa-masks-theater", "links": ["https://drive.google.com/drive/folders/1-APqMXkAFT3SjbfS7B603yAkXwn8j85f?usp=drive_link"] },
                "music": { "title": "Eastern Music", "icon": "fa-guitar", "links": ["https://drive.google.com/drive/folders/1c_nd7VssHfqGTFjX4cjFTxxE4w-_hmUm?usp=drive_link"] }
            },
            "English Medium": {
                "all": { "title": "All Subjects (Eng Medium)", "icon": "fa-globe", "links": ["https://drive.google.com/drive/folders/1lUPdlgSkMob_kVb4BX3ssByFqYDcBoxA"] }
            }
        };

        // --- RENDER LOGIC ---
        const contentArea = document.getElementById('content-area');

        function renderContent() {
            for (const [category, subjects] of Object.entries(subjectsData)) {
                const categoryHeader = `
                    <div class="relative mb-8 category-section">
                        <div class="absolute inset-0 flex items-center" aria-hidden="true">
                            <div class="w-full border-t border-gray-200"></div>
                        </div>
                        <div class="relative flex justify-start">
                            <span class="pr-3 bg-slate-50 text-xl font-bold text-slate-800">${category}</span>
                        </div>
                    </div>
                `;
                
                let cardsHtml = `<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">`;

                for (const [key, data] of Object.entries(subjects)) {
                    let downloadButtons = '';

                    // Logic for formatted Main Subjects (G10/G11 split)
                    if (data.g10 || data.g11) {
                        if (data.g10) {
                            data.g10.forEach((url, idx) => {
                                downloadButtons += `<button onclick="initDownload('${url}')" class="download-btn w-full text-left px-4 py-3 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-brand-100 hover:text-brand-700 rounded-lg mb-2 flex justify-between items-center border border-slate-200 hover:border-brand-200">Grade 10 - Part ${idx + 1} <i class="fa-solid fa-download text-brand-500"></i></button>`;
                            });
                        }
                        if (data.g11) {
                            data.g11.forEach((url, idx) => {
                                downloadButtons += `<button onclick="initDownload('${url}')" class="download-btn w-full text-left px-4 py-3 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-brand-100 hover:text-brand-700 rounded-lg mb-2 flex justify-between items-center border border-slate-200 hover:border-brand-200">Grade 11 - Part ${idx + 1} <i class="fa-solid fa-download text-brand-500"></i></button>`;
                            });
                        }
                    } 
                    // Logic for Array of Links
                    else if (Array.isArray(data.links)) {
                        data.links.forEach((item, idx) => {
                            const url = typeof item === 'string' ? item : item.url;
                            const name = typeof item === 'string' ? `Download Part ${idx + 1}` : item.name;
                            downloadButtons += `<button onclick="initDownload('${url}')" class="download-btn w-full text-left px-4 py-3 text-sm font-medium text-slate-700 bg-slate-100 hover:bg-brand-100 hover:text-brand-700 rounded-lg mb-2 flex justify-between items-center border border-slate-200 hover:border-brand-200">${name} <i class="fa-solid fa-download text-brand-500"></i></button>`;
                        });
                    }

                    cardsHtml += `
                        <div class="glass-card rounded-xl p-6 flex flex-col h-full subject-card hover:shadow-lg transition-shadow duration-300 bg-white/80">
                            <div class="flex items-center mb-5 border-b border-slate-100 pb-4">
                                <div class="w-12 h-12 rounded-xl bg-brand-50 flex items-center justify-center text-brand-600 mr-4 flex-shrink-0 shadow-sm border border-brand-100">
                                    <i class="fa-solid ${data.icon} text-xl"></i>
                                </div>
                                <h3 class="text-lg font-bold text-slate-900 leading-tight">${data.title}</h3>
                            </div>
                            <div class="flex-grow space-y-2">
                                ${downloadButtons}
                            </div>
                        </div>
                    `;
                }
                cardsHtml += `</div>`;
                
                contentArea.innerHTML += categoryHeader + cardsHtml;
            }
        }

        renderContent();

        // --- SEARCH FUNCTIONALITY ---
        const searchInput = document.getElementById('searchInput');
        searchInput.addEventListener('keyup', function(e) {
            const term = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('.subject-card');
            
            cards.forEach(card => {
                const title = card.querySelector('h3').innerText.toLowerCase();
                if (title.includes(term)) {
                    card.style.display = "flex";
                    card.parentElement.style.display = "grid";
                } else {
                    card.style.display = "none";
                }
            });
        });


        // --- AD GATE LOGIC (AUTO FLOW) ---
        let currentTargetUrl = "";

        function getUniqueAd() {
            // Filter out ads already used in this session if possible
            let available = adLinks.filter(link => !usedAds.includes(link));
            if (available.length === 0) {
                usedAds = []; // Reset if all used
                available = adLinks;
            }
            const selected = available[Math.floor(Math.random() * available.length)];
            usedAds.push(selected);
            return selected;
        }

        function initDownload(url) {
            currentTargetUrl = url;
            usedAds = []; // Reset for new download session
            
            // Reset UI
            document.getElementById('adModal').classList.remove('hidden');
            document.getElementById('step1-container').classList.remove('opacity-50', 'pointer-events-none');
            document.getElementById('step2-container').classList.add('opacity-50', 'pointer-events-none');
            
            document.getElementById('btn-step-1').classList.remove('hidden');
            document.getElementById('check-step-1').classList.add('hidden');
            document.getElementById('btn-step-1').disabled = false;
            document.getElementById('btn-step-1').innerText = "Watch Ad";
            document.getElementById('btn-step-1').classList.replace('bg-slate-400', 'bg-brand-600');
            document.getElementById('btn-step-1').classList.replace('text-slate-100', 'text-white');
            
            document.getElementById('btn-step-2').classList.remove('hidden');
            document.getElementById('check-step-2').classList.add('hidden');
            document.getElementById('btn-step-2').disabled = false;
            document.getElementById('btn-step-2').innerText = "Watch Ad";
            document.getElementById('btn-step-2').classList.replace('bg-slate-400', 'bg-brand-600');
            document.getElementById('btn-step-2').classList.replace('text-slate-100', 'text-white');
            
            document.getElementById('progressBar').style.width = "0%";
            document.getElementById('final-loader').classList.add('hidden');
        }

        function closeAdModal() {
            document.getElementById('adModal').classList.add('hidden');
        }

        function handleAdStep(step) {
            // 1. Auto open unique ad URL
            const adUrl = getUniqueAd();
            window.open(adUrl, '_blank');

            // 2. Start Timer logic
            const btn = document.getElementById(`btn-step-${step}`);
            let timeLeft = 15; // Set timer duration
            
            btn.disabled = true;
            btn.innerText = `Wait ${timeLeft}s`;
            btn.classList.replace('bg-brand-600', 'bg-slate-400');
            btn.classList.replace('text-white', 'text-slate-100');

            const timer = setInterval(() => {
                timeLeft--;
                btn.innerText = `Wait ${timeLeft}s`;

                if (timeLeft <= 0) {
                    clearInterval(timer);
                    
                    // Step Completed UI
                    btn.classList.add('hidden');
                    document.getElementById(`check-step-${step}`).classList.remove('hidden');
                    
                    // Logic Flow
                    if (step === 1) {
                        document.getElementById('progressBar').style.width = "50%";
                        // Auto activate step 2
                        const step2 = document.getElementById('step2-container');
                        step2.classList.remove('opacity-50', 'pointer-events-none');
                    } else if (step === 2) {
                        document.getElementById('progressBar').style.width = "100%";
                        document.getElementById('final-loader').classList.remove('hidden');
                        
                        // AUTO LOAD DOWNLOAD URL (No click needed)
                        setTimeout(() => {
                            window.location.href = currentTargetUrl;
                            // Close modal shortly after redirect triggers
                            setTimeout(() => closeAdModal(), 1000);
                        }, 1500);
                    }
                }
            }, 1000);
        }

        // --- WHATSAPP POPUP ---
        setTimeout(() => {
            document.getElementById('waPopup').classList.remove('hidden');
        }, 3000);

        function closeWaPopup() {
            document.getElementById('waPopup').classList.add('hidden');
        }

        // --- BACK TO TOP ---
        const backToTopBtn = document.getElementById('backToTop');
        window.onscroll = function() {
            if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
                backToTopBtn.classList.remove('opacity-0');
            } else {
                backToTopBtn.classList.add('opacity-0');
            }
        };
        backToTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

    </script>
</body>
</html>